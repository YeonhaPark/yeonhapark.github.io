{"componentChunkName":"component---src-templates-post-template-js","path":"/blog/what-is-cors/","result":{"data":{"markdownRemark":{"excerpt":"CORS는 Cross—Origin Resource Sharing(교차 출처 리소스 공유)의 약자이다. 브라우저는 보안상의 이유로 웹 애플리케이션이 리소스를 요청할 때 자신의 출처와 동일한 출처의 리소스만 허락한다.  즉, https://www.domain-a.com…","html":"<p>CORS는 Cross—Origin Resource Sharing(교차 출처 리소스 공유)의 약자이다. 브라우저는 보안상의 이유로 웹 애플리케이션이 리소스를 요청할 때 자신의 출처와 동일한 출처의 리소스만 허락한다. </p>\n<p align=\"center\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/d99cff176172dfde6fc1c19dc02a0883/99968/cors_overview.webp\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 31.0126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRnAAAABXRUJQVlA4IGQAAADQAwCdASoUAAYAPtFUo0uoJKMhsAgBABoJYgCdMoADQtr5PxErvEAA/iefwCQvu+rQEkmXGl3veLH+oJU7TUj82WuvPAbeVB65plOl7h/2V0e7W7RUE8PXouMPkoizJKPNlgAA'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"CORS의 원리\" title=\"CORS의 원리\" src=\"/static/d99cff176172dfde6fc1c19dc02a0883/8aab1/cors_overview.webp\" srcset=\"/static/d99cff176172dfde6fc1c19dc02a0883/81b7c/cors_overview.webp 158w,\n/static/d99cff176172dfde6fc1c19dc02a0883/6ea66/cors_overview.webp 315w,\n/static/d99cff176172dfde6fc1c19dc02a0883/8aab1/cors_overview.webp 630w,\n/static/d99cff176172dfde6fc1c19dc02a0883/99968/cors_overview.webp 709w\" sizes=\"(max-width: 630px) 100vw, 630px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></p>\n<figcaption align=\"center\">\n<small>\nhttps://docs.oracle.com/cd/E65459_01/dev.1112/e65461/content/general_cors.html\n</small>\n</figcaption>\n<p>즉, <a href=\"https://www.domain-a.com\">https://www.domain-a.com</a> 도메인이 하는 요청이 <a href=\"https://www.domain-a.com\">https://www.domain-a.com</a> 도메인이어야만 바라는 응답을 받을 수 있다는 이야기다.\n하지만 대부분의 클라이언트-서버 요청은 클라이언트와 서버의 URL이 다르다! 그럼 어떻게 서로 다른 도메인간의 통신이 가능한걸까?</p>\n<p>서버에서 응답으로 보내는 HTTP 헤더에 CORS 헤더를 설정해주면 다른 출처의 리소스도 불러올 수 있기 때문이다. CORS는 이렇듯 HTTP 헤더를 기반으로 <b>동일한 출처가 아닌 서버의 자원에 접근을 가능케하는 메커니즘</b>이다.</p>\n<p>애플리케이션 측에서 서버에 API 요청을 보낼 때 요청 헤더의 <code class=\"language-text\">Origin</code> 이라는 필드에 요청을 보내는 출처를 담아 보낸다. </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Origin<span class=\"token operator\">:</span> https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>yeonhapark<span class=\"token punctuation\">.</span>github<span class=\"token punctuation\">.</span>io</code></pre></div>\n<p>이를 받으면 서버는 <code class=\"language-text\">Access-Control-Allow-Origin</code> 헤더에 <code class=\"language-text\">Origin</code>을 명시해서 브라우저에게 응답한다. 서버가 <code class=\"language-text\">Access-Control-Allow-Origin</code>에 담는 내용은 반드시 클라이언트 측에서 보내진 <code class=\"language-text\">Origin</code>일 필요는 없고, 리소스에 접근이 허용된 출처를 명시해주면 된다. 이 응답을 받으면 브라우저는 자신이 보냈던 요청의 <code class=\"language-text\">Origin</code> 과 서버가 보내준 응답의 <code class=\"language-text\">Access-Control-Allow-Origin</code> 을 비교해본 후 응답이 유효한 응답인지 아닌지를 결정한다.</p>\n<p>기본적인 작동 방식은 위와 같지만 정확히 어떤 것이 잘못되었는지 알려면 아래의 세 가지 시나리오에 대해 알아두는 것이 좋다.</p>\n<h3>Simple Request(단순 요청)</h3>\n<p>다음 조건을 모두 충족하는 요청이 simple requests이다.</p>\n<ul>\n<li><code class=\"language-text\">GET</code> , <code class=\"language-text\">HEAD</code>, <code class=\"language-text\">POST</code> 중 하나의 메서드</li>\n<li>유저 에이전트가 자동으로 설정한 헤더 외에 사용가능한 헤더는 오직 <code class=\"language-text\">Accept</code> , <code class=\"language-text\">Accept-Language</code> , <code class=\"language-text\">Content-Language</code>, <code class=\"language-text\">Content-Type</code> 이다.</li>\n<li><code class=\"language-text\">Content-Type</code> 에 넣을 수 있는 헤더는 오직 <code class=\"language-text\">application/x-www-form-urlencoded</code> , <code class=\"language-text\">multipart/form-data</code>, <code class=\"language-text\">text/plain</code> 이다.</li>\n</ul>\n<p align=\"center\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/cfc342810ccc903cba1cd621f8b9aeb0/8ea22/simple-req.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 48.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/UlEQVQoz42Sy27aUBCG52A7FpcEo7bEpAlFKEEtt0JpVykSi9BUCjQUUqFEKQK5Lvc7EgIBWTQCIjbNA5CH4B3Y8D6s6RynkFsXHfmzz7E9v2f+MZTL5Q/ICwQo/xvL9xGC+JDXyBuQZVmo12rsaDSCWDQK305OoFKpQKlUesBS4P69fD6viBcKBa0kSfpqtaqF6XQKURT6Eg7Dp2AQfkgS9C4uoFgsPhD4lyDdoxC0Wi2Yz+eQTqcB/H6/GqviI8fHPApqUqkU1263GRRkMYHFRAW6vr+nJJNJbrFYgNVqfYlh1Ol0ALbdXa3H7dYj626nU6B83N/nfl9fk1wuRzBR4a9Xq3UmkyFYHZlMJsRms3F6vX5NEIQ7k+mXaBDlAPgpy4CerNqkNgyvrqA/GMBgOISvkQjE43FIJBIQPDi4EzKZTHuBQEA9Ho+ZGg6n0+mw9Xr9SZvdbpft9/vMr8tLBgWZ0NGROhaL8Wenp2ufDw81Xq+Xe+/zAWCpPA6FNJtNks1mFXBqq/bofnxzA+88Ht7tcmneImiP2mm3Cy6HYx3ZcNjtG6Iosuadndsq0QOYzWbKZB9PtdFowPfzc3hmMJAtUSRbm5tENBoVWziVCp4bDMtmVbdnDHo1m830f3oi2Ov1IBwKgQWfWy2WFa+2t8GCFaH4SodhGPgDykG//pzz/PEAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"단순요청\" title=\"단순요청\" src=\"/static/cfc342810ccc903cba1cd621f8b9aeb0/f058b/simple-req.png\" srcset=\"/static/cfc342810ccc903cba1cd621f8b9aeb0/c26ae/simple-req.png 158w,\n/static/cfc342810ccc903cba1cd621f8b9aeb0/6bdcf/simple-req.png 315w,\n/static/cfc342810ccc903cba1cd621f8b9aeb0/f058b/simple-req.png 630w,\n/static/cfc342810ccc903cba1cd621f8b9aeb0/40601/simple-req.png 945w,\n/static/cfc342810ccc903cba1cd621f8b9aeb0/8ea22/simple-req.png 1023w\" sizes=\"(max-width: 630px) 100vw, 630px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></p>\n<figcaption align=\"center\">\n<small>\nhttps://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\n</small>\n</figcaption>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">GET /resources/public-data/ HTTP/1.1\nHost: bar.other\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:71.0) Gecko/20100101 Firefox/71.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-us,en;q=0.5\nAccept-Encoding: gzip,deflate\nConnection: keep-alive\nOrigin: https://foo.example</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token constant\">HTTP</span><span class=\"token operator\">/</span><span class=\"token number\">1.1</span> <span class=\"token number\">200</span> <span class=\"token constant\">OK</span>\nDate<span class=\"token operator\">:</span> Mon<span class=\"token punctuation\">,</span> <span class=\"token number\">01</span> Dec <span class=\"token number\">2008</span> <span class=\"token number\">00</span><span class=\"token operator\">:</span><span class=\"token number\">23</span><span class=\"token operator\">:</span><span class=\"token number\">53</span> <span class=\"token constant\">GMT</span>\nServer<span class=\"token operator\">:</span> Apache<span class=\"token operator\">/</span><span class=\"token number\">2</span>\nAccess<span class=\"token operator\">-</span>Control<span class=\"token operator\">-</span>Allow<span class=\"token operator\">-</span>Origin<span class=\"token operator\">:</span> https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>foo<span class=\"token punctuation\">.</span>example\nKeep<span class=\"token operator\">-</span>Alive<span class=\"token operator\">:</span> timeout<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> max<span class=\"token operator\">=</span><span class=\"token number\">100</span>\nConnection<span class=\"token operator\">:</span> Keep<span class=\"token operator\">-</span>Alive\nTransfer<span class=\"token operator\">-</span>Encoding<span class=\"token operator\">:</span> chunked\nContent<span class=\"token operator\">-</span>Type<span class=\"token operator\">:</span> application<span class=\"token operator\">/</span>xml\n\n<span class=\"token punctuation\">[</span>…<span class=\"token constant\">XML</span> Data…<span class=\"token punctuation\">]</span></code></pre></div>\n<p>서버의 응답은 <code class=\"language-text\">https://foo.example</code> 에서의 요청에 대해서만 리소스를 제공할 것을 명시하고 있다.</p>\n<h3>Preflight Request(프리플라이트 요청)</h3>\n<p>프리플라이트 요청은 브라우저가 <code class=\"language-text\">OPTIONS</code> 메서드를 사용하여 먼저 HTTP 요청을 다른 출처의 리소스에 보내어 실 요청을 보내기에 안전한지 판단하는 방법이다. 이 방법은 요청이 유저 데이터에 사이드 이펙트를 끼칠 수 있기 때문에 선택된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> xhr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'https://bar.other/resources/post-here/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span><span class=\"token function\">setRequestHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'X-PINGOTHER'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'pingpong'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span><span class=\"token function\">setRequestHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'application/xml'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span>onreadystatechange <span class=\"token operator\">=</span> handler<span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;person>&lt;name>Arun&lt;/name>&lt;/person>'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위의 요청은 스탠다드에서 벗어난 HTTP 요청 헤더인 <code class=\"language-text\">X-PINGOTHER</code> 가 사용되었고 <code class=\"language-text\">Content-Type</code> 도 <code class=\"language-text\">application/xml</code> 이다. 따라서  프리플라이트 요청이 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">OPTIONS /doc HTTP/1.1\nHost: bar.other\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:71.0) Gecko/20100101 Firefox/71.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-us,en;q=0.5\nAccept-Encoding: gzip,deflate\nConnection: keep-alive\nOrigin: https://foo.example\nAccess-Control-Request-Method: POST\nAccess-Control-Request-Headers: X-PINGOTHER, Content-Type\n\nHTTP/1.1 204 No Content\nDate: Mon, 01 Dec 2008 01:15:39 GMT\nServer: Apache/2\nAccess-Control-Allow-Origin: https://foo.example\nAccess-Control-Allow-Methods: POST, GET, OPTIONS\nAccess-Control-Allow-Headers: X-PINGOTHER, Content-Type\nAccess-Control-Max-Age: 86400\nVary: Accept-Encoding, Origin\nKeep-Alive: timeout=2, max=100\nConnection: Keep-Alive</code></pre></div>\n<p>1번줄~10번줄 까지는 <code class=\"language-text\">OPTIONS</code> 메서드 플리플라이트 요청을 나타낸다. 브라우저는 자바스크립트 코드에 있는 요청 파라미터를 바탕으로 <code class=\"language-text\">OPTIONS</code> 메서드가 사용되어야하는지를 판단한다. <code class=\"language-text\">OPTIONS</code> 요청은 9번줄~10번줄에 해당하는 두 요청헤더가 추가된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">Access<span class=\"token operator\">-</span>Control<span class=\"token operator\">-</span>Request<span class=\"token operator\">-</span>Method<span class=\"token operator\">:</span> <span class=\"token constant\">POST</span>\nAccess<span class=\"token operator\">-</span>Control<span class=\"token operator\">-</span>Request<span class=\"token operator\">-</span>Headers<span class=\"token operator\">:</span> <span class=\"token constant\">X</span><span class=\"token operator\">-</span><span class=\"token constant\">PINGOTHER</span><span class=\"token punctuation\">,</span> Content<span class=\"token operator\">-</span>Type</code></pre></div>\n<p><code class=\"language-text\"></code>Access-Control-Request-Method<code class=\"language-text\">는 실제 리퀘스트가 보내질 경우</code>POST<code class=\"language-text\">메서드로 가게됨을 서버에 알린다.</code>Access-Control-Request-Headers<code class=\"language-text\">는 실제 리퀘스트가</code>X-PINGOTHER<code class=\"language-text\">그리고</code>Content-Type` 헤더를 포함함을 가리킨다. 이런 정보로 헤더는 어떤 요청을 받아들여야  하는 지에 대한 정보를 얻는다.</p>\n<p>13줄 부터 22줄까지는 서버에서 보내는 응답이다. 요청 메서드(<code class=\"language-text\">POST</code> )와 헤더가 허용됨을 알려준다. </p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">Access<span class=\"token operator\">-</span>Control<span class=\"token operator\">-</span>Allow<span class=\"token operator\">-</span>Origin<span class=\"token operator\">:</span> https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>foo<span class=\"token punctuation\">.</span>example\nAccess<span class=\"token operator\">-</span>Control<span class=\"token operator\">-</span>Allow<span class=\"token operator\">-</span>Methods<span class=\"token operator\">:</span> <span class=\"token constant\">POST</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">GET</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">OPTIONS</span>\nAccess<span class=\"token operator\">-</span>Control<span class=\"token operator\">-</span>Allow<span class=\"token operator\">-</span>Headers<span class=\"token operator\">:</span> <span class=\"token constant\">X</span><span class=\"token operator\">-</span><span class=\"token constant\">PINGOTHER</span><span class=\"token punctuation\">,</span> Content<span class=\"token operator\">-</span>Type\nAccess<span class=\"token operator\">-</span>Control<span class=\"token operator\">-</span>Max<span class=\"token operator\">-</span>Age<span class=\"token operator\">:</span> <span class=\"token number\">86400</span></code></pre></div>\n<p><code class=\"language-text\">Access-Control-Allow-Origin: https://foo.example</code> 은 요청을 하는 도메인만 오직 리소스에 접근이 가능함을 나타낸다. <code class=\"language-text\">Access-Control-Allow-Methods</code> 은 <code class=\"language-text\">POST</code> , <code class=\"language-text\">GET</code> 메서드가 리소스 요청에 사용될 수 있음을 가리킨다.</p>\n<p>또한 <code class=\"language-text\">Access-Control-Allow-Header</code> 를 통해 실제 리퀘스트에 사용이 가능한 헤더 정보를 보내준다. <code class=\"language-text\">Access-Control-Max-Age: 86400</code> 는 프리플라이트 요청이 얼마간 캐시될 수 있는지를 나타낸다. 위 경우의 시간은 86400초, 즉 24시간이다. </p>\n<p>프리플라이트 요청이 끝나면 진짜 요청이 보내진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">POST /doc HTTP/1.1\nHost: bar.other\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.14; rv:71.0) Gecko/20100101 Firefox/71.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-us,en;q=0.5\nAccept-Encoding: gzip,deflate\nConnection: keep-alive\nX-PINGOTHER: pingpong\nContent-Type: text/xml; charset=UTF-8\nReferer: https://foo.example/examples/preflightInvocation.html\nContent-Length: 55\nOrigin: https://foo.example\nPragma: no-cache\nCache-Control: no-cache\n\n&lt;person&gt;&lt;name&gt;Arun&lt;/name&gt;&lt;/person&gt;\n\nHTTP/1.1 200 OK\nDate: Mon, 01 Dec 2008 01:15:40 GMT\nServer: Apache/2\nAccess-Control-Allow-Origin: https://foo.example\nVary: Accept-Encoding, Origin\nContent-Encoding: gzip\nContent-Length: 235\nKeep-Alive: timeout=2, max=99\nConnection: Keep-Alive\nContent-Type: text/plain\n\n[Some XML payload]</code></pre></div>\n<p align=\"center\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/26be1d707cb15727951f38d12977426f/2bef9/preflight_correct.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 105.0632911392405%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABd0lEQVQ4y5WU25KCMBBE+f+/9EqpVQRBDJcAezLNoqtosf2QiiE9M90zMdlut7vdrqqqcRyHYRhX4Hw+7/f70+mUdF3Xtu1KmtD3vVgJNH68fB6+IoRwv9+5lpRlyU7rzdA0DZ/7RYQAh8uHwyGSEQDter1yxFoUBWue542BKIuKiMN5wj2vzFXErZxACd57O6uI4g1sRFbQJE3Tf7n1J7NzbrPZENUUhRe1yoC3XGAlMybXda0GRbf58JxcV0H9CyRIieRkWcZhNOy5VWwIicjoXxGBdaz4Ihcr41MsoSdysAbE9hq5M3CoSZBn6qIyE/dBfh+StYZF9WZD9KOuydhbuE+ASfLHkFAVelCCPEoinMpR8e98zqfxjDZAdi43bzDGZRna5DYVfSv7crnIM3VVgcF3zdOEqTErPZvHYSKzOx6PjM48YfMk6W20hvgMvZccvbzlVvFTLRBTHZ4fHOvykHwqlXDkZCqdAf7k9voh0d+IfJbmH/RS0FiJ/zOUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"프리플라이트 요청\" title=\"프리플라이트 요청\" src=\"/static/26be1d707cb15727951f38d12977426f/f058b/preflight_correct.png\" srcset=\"/static/26be1d707cb15727951f38d12977426f/c26ae/preflight_correct.png 158w,\n/static/26be1d707cb15727951f38d12977426f/6bdcf/preflight_correct.png 315w,\n/static/26be1d707cb15727951f38d12977426f/f058b/preflight_correct.png 630w,\n/static/26be1d707cb15727951f38d12977426f/40601/preflight_correct.png 945w,\n/static/26be1d707cb15727951f38d12977426f/2bef9/preflight_correct.png 1024w\" sizes=\"(max-width: 630px) 100vw, 630px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></p>\n<figcaption align=\"center\">\n<small>\nhttps://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\n</small>\n</figcaption>\n<h3>Requests with Credentials(인증된 요청)</h3>\n<p>기본적으로 크로스 사이트 <code class=\"language-text\">XMLHttpRequest</code> 나 <code class=\"language-text\">Fetch</code> API는  크레덴셜을 보내지 않는다. 인증과 관련된 정보를 담으려면 <code class=\"language-text\">credentials</code> 옵션을 사용한다.</p>\n<p>옵션에는 세 가지 값을 사용할 수 있다.</p>\n<ul>\n<li><code class=\"language-text\">same-origin</code>: 같은 출처 간 요청에만 인증 정보를 담을 수 있다.</li>\n<li><code class=\"language-text\">include</code>: 모든 요청에 인증 정보를 담을 수 있다.</li>\n<li><code class=\"language-text\">omit</code>: 모든 요청에 인증 정보를 담지 않는다.</li>\n</ul>\n<p>다만 브라우저는 인증 모드가 <code class=\"language-text\">include</code> 일 경우 <code class=\"language-text\">Access-Control-Allow-Origin</code> 값에 와일드카드(*) 사용을 금하고 있다. 이 경우에는 응답에 <code class=\"language-text\">Allow-Control-Allow-Credentials: true</code> 를 넣어주면 복잡한 상황을 방지할 수 있다.</p>\n<h3>CORS를 해결하기 위한 방법</h3>\n<p>서버 측에서 브라우저에서 정보를 읽는 것이 허용된 출처를 명시해주어야 하기 때문에 서버 측에서 HTTP 헤더를 추가해주어야 한다(아래 그림 참조)</p>\n<p align=\"center\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/cfc342810ccc903cba1cd621f8b9aeb0/8ea22/simple-req-updated.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 48.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/UlEQVQoz42Sy27aUBCG52A7FpcEo7bEpAlFKEEtt0JpVykSi9BUCjQUUqFEKQK5Lvc7EgIBWTQCIjbNA5CH4B3Y8D6s6RynkFsXHfmzz7E9v2f+MZTL5Q/ICwQo/xvL9xGC+JDXyBuQZVmo12rsaDSCWDQK305OoFKpQKlUesBS4P69fD6viBcKBa0kSfpqtaqF6XQKURT6Eg7Dp2AQfkgS9C4uoFgsPhD4lyDdoxC0Wi2Yz+eQTqcB/H6/GqviI8fHPApqUqkU1263GRRkMYHFRAW6vr+nJJNJbrFYgNVqfYlh1Ol0ALbdXa3H7dYj626nU6B83N/nfl9fk1wuRzBR4a9Xq3UmkyFYHZlMJsRms3F6vX5NEIQ7k+mXaBDlAPgpy4CerNqkNgyvrqA/GMBgOISvkQjE43FIJBIQPDi4EzKZTHuBQEA9Ho+ZGg6n0+mw9Xr9SZvdbpft9/vMr8tLBgWZ0NGROhaL8Wenp2ufDw81Xq+Xe+/zAWCpPA6FNJtNks1mFXBqq/bofnxzA+88Ht7tcmneImiP2mm3Cy6HYx3ZcNjtG6Iosuadndsq0QOYzWbKZB9PtdFowPfzc3hmMJAtUSRbm5tENBoVWziVCp4bDMtmVbdnDHo1m830f3oi2Ov1IBwKgQWfWy2WFa+2t8GCFaH4SodhGPgDykG//pzz/PEAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"단순요청\" title=\"단순요청\" src=\"/static/cfc342810ccc903cba1cd621f8b9aeb0/f058b/simple-req-updated.png\" srcset=\"/static/cfc342810ccc903cba1cd621f8b9aeb0/c26ae/simple-req-updated.png 158w,\n/static/cfc342810ccc903cba1cd621f8b9aeb0/6bdcf/simple-req-updated.png 315w,\n/static/cfc342810ccc903cba1cd621f8b9aeb0/f058b/simple-req-updated.png 630w,\n/static/cfc342810ccc903cba1cd621f8b9aeb0/40601/simple-req-updated.png 945w,\n/static/cfc342810ccc903cba1cd621f8b9aeb0/8ea22/simple-req-updated.png 1023w\" sizes=\"(max-width: 630px) 100vw, 630px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></p>\n<figcaption align=\"center\">\n<small>\nhttps://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\n</small>\n</figcaption>\n<p>CORS에러를 맞닦뜨리는 쪽은 요청을 담당하는 프론트엔드 개발자지만 CORS 에러를 해결하는 쪽은 서버를 담당하는 백엔드 개발자이다. 따라서 프론트 개발자는 백엔드 개발자에게 CORS를 해결하기 위한 헤더를 추가해달라고 요청하고, 백엔드 개발자는 이에 대응하여 에러를 처리한다.</p>\n<p>로컬 서버에 한정적인 방법이지만, 프론트 개발자 측에서 CORS를 해결하는 방법도 있다.</p>\n<p><code class=\"language-text\">http-proxy-middleware</code> 라는 패키지를 추가하면 프론트에서 요청을 보내는 주소를 proxy 우회하여 요청을 받는 서버와 동일하게 조정하여 CORS를 방지하는 방법이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createProxyMiddleware <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http-proxy-middleware\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmodule<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">app</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string\">\"/api\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/auth/google\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">createProxyMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      target<span class=\"token operator\">:</span> <span class=\"token string\">\"http://localhost:5000\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>참고한 글</p>\n<ul>\n<li><a href=\"https://evan-moon.github.io/2020/05/21/about-cors/#credentialed-request\">https://evan-moon.github.io/2020/05/21/about-cors/#credentialed-request</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\">https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS</a></li>\n</ul>","frontmatter":{"title":"CORS란? 그리고 이를 해결하는 방법은?","tags":["network","CORS"],"date":"December 01, 2021","description":null}},"prev":{"frontmatter":{"title":"Big O Explained"},"fields":{"slug":"/blog/big-o-explained/"}},"next":{"frontmatter":{"title":"JavaScript Iterable"},"fields":{"slug":"/blog/javascript-iterable/"}}},"pageContext":{"slug":"/blog/what-is-cors/","prevSlug":"/blog/big-o-explained/","nextSlug":"/blog/javascript-iterable/"}},"staticQueryHashes":["2555585279","2841359383","3159585216"]}