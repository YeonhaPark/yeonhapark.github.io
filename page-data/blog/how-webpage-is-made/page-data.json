{"componentChunkName":"component---src-templates-post-template-js","path":"/blog/how-webpage-is-made/","result":{"data":{"markdownRemark":{"excerpt":"웹페이지가 로드될 때, 웹 클라이언트는 서버에게 리소스(html)파일을 요청하고 서버는 이 리소스를 보낸다.. 웹 클라이언트가 서버에게 리소스를 요청하고 나면 서버는 바이너리 스트림 형식의 텍스트 파일을 응답 헤더의  속성에  형식으로 전송한다.   은 MIME…","html":"<p>웹페이지가 로드될 때, 웹 클라이언트는 서버에게 리소스(html)파일을 요청하고 서버는 이 리소스를 보낸다.. 웹 클라이언트가 서버에게 리소스를 요청하고 나면 서버는 바이너리 스트림 형식의 텍스트 파일을 응답 헤더의 <code class=\"language-text\">Content-Type</code> 속성에 <code class=\"language-text\">text/html; charset=UTF-8</code> 형식으로 전송한다. </p>\n<p><code class=\"language-text\">text/html</code> 은 MIME 타입의 일종으로 브라우저에게 html 형식의 문서임을 알려주고 <code class=\"language-text\">charset=UTF-8</code> 은 해당 리소스가 UTF-8 인코딩에 준한다는 것을 알려준다. 이 정보를 활용해 브라우저는 바이너리 형식을 읽을 수 있는 텍스트 파일로 변환한다. </p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">DOM Rendering</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>./src/styles.css<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>app<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello world</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">⭐⭐⭐⭐⭐</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>src/index.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><a href=\"https://codesandbox.io/s/confident-yonath-1oxlw?file=/index.html:0-357\">https://codesandbox.io/s/confident-yonath-1oxlw?file=/index.html:0-357</a></p>\n<p>서버의 <code class=\"language-text\">Content-Type</code> 이 브라우저 조건에 알맞으면 이제 브라우저는 HTML 문서를 읽을 준비가 되었다. 하지만 그냥 텍스트 처럼 보이는 HTML 파일이 어떻게 브라우저 상의 화면으로 나타나는 걸까?</p>\n<h3>DOM(Document Object Model)</h3>\n<p>브라우저는 HTML 코드를 읽으면서 모든 HTML 요소들을  <code class=\"language-text\">Node</code> 라고 불리는 자바스크립트 오브젝트로 변환한다. 이런 노드 오브젝트들은 트리 구조로 이루어져 있어서 이전에 생성된 노드 오브젝트를 재사용하는 데에 유리하다. </p>\n<p align=\"center\">\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 431px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/fb5f0ba2850773bb7034f343ecf10fcd/9cb4e/domtree.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 69.62025316455697%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADAklEQVQ4y21Ty05aURTdXGmFCrRSqwmpfVhp0ph2IOnEeZMOnPgHnfgLmn5Co42pMY0xMdb3xAQYKEZt1YEIhQq2EJCXiq8iIL6FUHq6Nr1YE3uTnbPvOftx1trrEP3n29nZUe7v71M8Hv9wenoq9vb2RCgUEuwfHR39HhwcrF1aWiK73a64lry5uVm0YDBICKaFhQVKpVLKtbU1SiQSb/P5fBqFgtvb21H4sWw26zebzTXj4+M0Pz+vEELQ6uoqRSKRohFvyMaH0uHhoWJlZUXR0tJSjn5qWAVMA6uWV01DQ4Oqubn5RimHC5XqXDroXlwZSvGA6BavOp3uJvybWq1WhVW6TESzkh+Lxf4VBDwpnU4zX+8AOQj+HBsbGy7c9PvBwYFVpVIpS42Q+CqTyQQQbw+Hw26cOxHnc7vdL5PJJIF3ibCpvLi44MI2JAoEi93dXXbF+fl5Sq/X800lxDHXb3K5nEC8wAUEUIlCoSB8Pt/rk5MT5rysOBhMjXp7e2vGxsaednR0PO/q6noB3zgwMPDAZDIVobS2tpLValVjzzgxMVE/Ojr6rL29vXF4eNjY1tamnpyc/DtlDgY/VXC18uDLZOPvNu9f4Y0HpIOxXCSYUo67YzAYqooxzAM48wJyCHz08ObZ2ZkKXM2ATx9ghBHzcX19vQeQI9Fo9Ae4/jIyMlLpcrmYt/eQVBgy8wC2i46Pj/MQbg7FWLTT8gAq4P9EsOB96HAGSdMscDQvoGGyr6/vHvOKGAtzjoFlwe0vmpqaeojOdV6vtx4cVVssFuru7iZwch8FHmOCxs7OzlrsGfr7+03gu3FoaOiJRqMpxz8tLi7ehQ7rgbAOQn/Eaid0oEAgQLOzs2Sz2aipqYk8Hk+JN50saMUVLkkWeiX/cy5Q0PLyMhG/Cmwo/H6/hNsoAIkcDgd3rgRsP2QUB5QkqPkk86uG/xX8xqG9BHgzy43K5ubmpGtvG6QruBMK6gEjB54ECghw9ZkTnU5nBQpltra2BAYmcP6t9HTxqugPdIKUcxCxnRIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Dom Tree\" title=\"Dom Tree\" src=\"/static/fb5f0ba2850773bb7034f343ecf10fcd/9cb4e/domtree.png\" srcset=\"/static/fb5f0ba2850773bb7034f343ecf10fcd/c26ae/domtree.png 158w,\n/static/fb5f0ba2850773bb7034f343ecf10fcd/6bdcf/domtree.png 315w,\n/static/fb5f0ba2850773bb7034f343ecf10fcd/9cb4e/domtree.png 431w\" sizes=\"(max-width: 431px) 100vw, 431px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span></p>\n<h3>CSS Object Model(CSSOM)</h3>\n<p>DOM 트리를 생성하고 나서 브라우저는 모든 소스에서 CSS를 찾아내어 CSSOM(CSS Object Model)을 형성한다. CSSOM의 경우에는 스크린에 보여지지 않는 <code class=\"language-text\">&lt;meta&gt;</code>, <code class=\"language-text\">&lt;script&gt;</code> , <code class=\"language-text\">&lt;title&gt;</code> 같은 돔 엘러먼트 속성을 포함하지 않는다.</p>\n<p>CSS는 html 태그의 style 속성에 넣는 인라인 스타일링, 임베디드, 유저 에이전트 등 다양한 경로에서 소스가 제공된다. 브라우저는 모든 경로의 소스를 아우른 최종 CSS 프로퍼티를 계산하여 노드를 생성한다. CSS가 트리 구조를 가진 속성이라는 것은 스타일링 속성이 상단에 위치한 태그 스타일링을 상속하는 것에서도 알아볼 수 있다. <code class=\"language-text\">font-size</code> 같은 속성이 상위 <code class=\"language-text\">&lt;div&gt;</code> 태그에 적용되어있으면 그 안에 위치하는 <code class=\"language-text\">&lt;span&gt;</code> 태그에서도 동일한 <code class=\"language-text\">font-size</code> 를 상속한다(inherit).</p>\n<h3>Render Tree</h3>\n<p>렌더 트리는 돔 트리와 CSSOM 트리가 합쳐진 트리 구조이다. 브라우저는 화면에 보이는 엘러먼트들의 레이아웃과 스크린에 이를 그리기 위한 계산을 해야 하는데, 이를 위해 렌더 트리를 이용한다. 즉 DOM Tree와 CSSOM 계산은 렌더 트리를 계산하기 위한 선행 과정이며 렌더 트리가 형성되어야만 우리가 원하는 화면을 스크린에 띠울 수 있다. 또한 스크린에 노출되는 형태만 담는 것이기 때문에 픽셀을 차지하지 않는 영역의 노드는 포함하지 않는다. 예를 들어 <code class=\"language-text\">display:none;</code> 속성을 가진 엘러먼트는 렌더 트리에 포함되지 않는다.</p>\n<p>요약하면,</p>\n<p>브라우저가 HTML 텍스트를 읽고 돔 트리를 형성한다 → 모든 소스에서 가져온 CSS를 읽어서 CSSOM 트리를 형성한다 → 돔 트리와 CSSOM 트리를 가지고 Render-Tree를 형성한다 → Render-Tree를 가지고 엘러먼트를 스크린에 그린다</p>\n<h3>자바스크립트 파일을 body태그의 하단에 위치시켜야 하는 이유</h3>\n<p>DOM이 파싱 작업을 하다가 자바스크립트 파일을 만나면 파싱을 중단시키고 스크립트를 실행한다. 이 때문에 DOM의 형성이 지연될 수 있고 자바스크립트 파일 내에 DOM 조작을 하는 코드가 있을 수 있는데 DOM이 형성이 안된 시점에서 조작을 하려는 순서의 미스가 발생할 수 있다.</p>\n<p>참고한 글: <a href=\"https://medium.com/jspoint/how-the-browser-renders-a-web-page-dom-cssom-and-rendering-df10531c9969\">https://medium.com/jspoint/how-the-browser-renders-a-web-page-dom-cssom-and-rendering-df10531c9969</a></p>","frontmatter":{"title":"웹페이지가 사용자에게 보여지는 과정","tags":["html","web-development"],"date":"December 17, 2021","description":null}},"prev":{"frontmatter":{"title":"Virtual DOM을 사용하는 이유"},"fields":{"slug":"/blog/why-we-use-virtual-dom/"}},"next":{"frontmatter":{"title":"Big O Explained"},"fields":{"slug":"/blog/big-o-explained/"}}},"pageContext":{"slug":"/blog/how-webpage-is-made/","prevSlug":"/blog/why-we-use-virtual-dom/","nextSlug":"/blog/big-o-explained/"}},"staticQueryHashes":["2555585279","2841359383","3159585216"]}